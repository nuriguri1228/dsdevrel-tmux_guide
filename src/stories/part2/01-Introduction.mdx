import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="2부: Claude Code Agent Team/01. Claude Code와 Agent Team 소개" />

# Claude Code와 Agent Team 소개

1부에서 배운 tmux의 기초 지식을 바탕으로, 이제 실전 활용 사례인 Claude Code의 Agent Team 기능을 살펴봅니다.
여러 AI 에이전트를 동시에 운영하며 개발 생산성을 극대화하는 워크플로우를 구축해 보겠습니다.

---

## 1.1 Claude Code CLI 소개

### Claude Code란?

Claude Code는 Anthropic이 제공하는 **CLI 기반 AI 코딩 에이전트**입니다.
터미널에서 직접 Claude와 대화하며 코드를 작성, 수정, 디버깅할 수 있는 도구로,
IDE 플러그인이 아닌 독립적인 CLI 도구라는 점이 특징입니다.

<div style={{ border: '2px solid #1976d2', borderRadius: '12px', padding: '20px', margin: '20px 0', maxWidth: '700px', background: '#f5f5f5' }}>
  <div style={{ textAlign: 'center', fontWeight: 'bold', fontSize: '16px', marginBottom: '16px', color: '#333' }}>개발 환경</div>
  <div style={{ display: 'flex', justifyContent: 'center', gap: '16px', marginBottom: '20px', flexWrap: 'wrap' }}>
    <div style={{ padding: '16px 20px', background: '#e3f2fd', border: '2px solid #1976d2', borderRadius: '8px', textAlign: 'center', minWidth: '120px' }}>
      <div style={{ fontWeight: 'bold', marginBottom: '4px' }}>IDE</div>
      <div style={{ fontSize: '13px', color: '#555' }}>(VSCode, Vim 등)</div>
    </div>
    <div style={{ padding: '16px 20px', background: '#e3f2fd', border: '2px solid #1976d2', borderRadius: '8px', textAlign: 'center', minWidth: '120px' }}>
      <div style={{ fontWeight: 'bold', marginBottom: '4px' }}>Terminal</div>
      <div style={{ fontSize: '13px', color: '#555' }}>(bash, zsh)</div>
    </div>
    <div style={{ padding: '16px 20px', background: '#f3e5f5', border: '2px solid #7b1fa2', borderRadius: '8px', textAlign: 'center', minWidth: '120px' }}>
      <div style={{ fontWeight: 'bold', marginBottom: '4px', color: '#7b1fa2' }}>Claude Code</div>
      <div style={{ fontSize: '13px', color: '#555' }}>(CLI 기반 AI 에이전트)</div>
    </div>
  </div>
  <div style={{ display: 'flex', justifyContent: 'center', gap: '0', marginBottom: '8px' }}>
    <div style={{ width: '2px', height: '20px', background: '#666', margin: '0 60px' }}></div>
    <div style={{ width: '2px', height: '20px', background: '#666', margin: '0 60px' }}></div>
    <div style={{ width: '2px', height: '20px', background: '#666', margin: '0 60px' }}></div>
  </div>
  <div style={{ textAlign: 'center', padding: '12px', background: '#e8f5e9', border: '2px solid #388e3c', borderRadius: '8px', fontWeight: 'bold', color: '#2e7d32' }}>
    파일 시스템 & Git
  </div>
</div>

### CLI 기반 도구의 장점

| 장점 | 설명 |
|------|------|
| **IDE 독립적** | 어떤 에디터를 사용하든 동일하게 작동 |
| **원격 서버 지원** | SSH로 접속한 서버에서도 바로 사용 가능 |
| **자동화 용이** | 셸 스크립트와 결합하여 워크플로우 자동화 |
| **tmux 호환** | tmux 세션 안에서 실행하여 백그라운드 작업 가능 |
| **경량** | GUI 없이 터미널만으로 강력한 AI 코딩 지원 |

### Claude Code의 핵심 기능

Claude Code는 단순한 코드 생성 도구를 넘어, 프로젝트 전체를 이해하고 작업하는 AI 에이전트입니다.

- **코드 생성 및 수정**: 새로운 기능 구현, 버그 수정, 리팩토링
- **파일 시스템 직접 접근**: 프로젝트 파일을 읽고, 생성하고, 수정
- **Git 작업 지원**: 커밋, 브랜치 생성, PR 작성 등 Git 워크플로우 통합
- **셸 명령어 실행**: 빌드, 테스트, 린팅 등 터미널 명령어 직접 실행
- **프로젝트 컨텍스트 이해**: 프로젝트 구조, 의존성, 코딩 컨벤션 파악

### 기본 사용법

```bash
# Claude Code 실행 (대화형 모드)
claude

# 특정 프롬프트로 실행
claude "이 프로젝트의 구조를 분석해줘"

# 파이프를 통한 입력
cat error.log | claude "이 에러 로그를 분석해줘"

# 도움말 확인
claude --help
```

대화형 모드에서는 자연어로 요청을 입력하면 Claude가 코드를 분석하고,
필요한 파일을 수정하며, 명령어를 실행하여 작업을 완료합니다.

---

## 1.2 Agent Team이란?

### 개념

Agent Team은 Claude Code의 핵심 기능 중 하나로,
**하나의 복잡한 작업을 여러 에이전트가 분담하여 병렬 처리**하는 방식입니다.

사용자가 복잡한 작업을 요청하면, Claude Code는 자동으로 **Team Lead** 역할을 맡아
작업을 분석하고, 여러 **Sub-agent**를 생성하여 각각에게 독립적인 작업을 할당합니다.

<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '8px', margin: '20px 0', maxWidth: '700px' }}>
  <div style={{ padding: '14px 28px', background: '#e3f2fd', border: '2px solid #1976d2', borderRadius: '8px', fontWeight: 'bold', textAlign: 'center' }}>
    <div>사용자 (You)</div>
    <div style={{ fontSize: '13px', fontWeight: 'normal', color: '#555' }}>"기능 X를 구현해"</div>
  </div>
  <div style={{ fontSize: '24px', color: '#666' }}>↓</div>
  <div style={{ padding: '14px 28px', background: '#f3e5f5', border: '2px solid #7b1fa2', borderRadius: '8px', fontWeight: 'bold', textAlign: 'center', color: '#7b1fa2' }}>
    <div>Team Lead</div>
    <div style={{ fontSize: '13px', fontWeight: 'normal', color: '#555' }}>(조율 & 분배)</div>
  </div>
  <div style={{ display: 'flex', justifyContent: 'center', gap: '4px', color: '#666', fontSize: '20px' }}>
    <span>↙</span><span>↓</span><span>↘</span>
  </div>
  <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', flexWrap: 'wrap' }}>
    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '6px' }}>
      <div style={{ padding: '12px 20px', background: '#f3e5f5', border: '2px solid #7b1fa2', borderRadius: '8px', textAlign: 'center', minWidth: '120px' }}>
        <div style={{ fontWeight: 'bold', color: '#7b1fa2' }}>Sub-Agent #1</div>
        <div style={{ fontSize: '13px', color: '#555' }}>(백엔드)</div>
      </div>
      <div style={{ fontSize: '18px', color: '#666' }}>↓</div>
      <div style={{ padding: '8px 16px', background: '#fff3e0', border: '1px solid #ff9800', borderRadius: '6px', fontSize: '13px', textAlign: 'center' }}>API 구현</div>
    </div>
    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '6px' }}>
      <div style={{ padding: '12px 20px', background: '#f3e5f5', border: '2px solid #7b1fa2', borderRadius: '8px', textAlign: 'center', minWidth: '120px' }}>
        <div style={{ fontWeight: 'bold', color: '#7b1fa2' }}>Sub-Agent #2</div>
        <div style={{ fontSize: '13px', color: '#555' }}>(프론트)</div>
      </div>
      <div style={{ fontSize: '18px', color: '#666' }}>↓</div>
      <div style={{ padding: '8px 16px', background: '#fff3e0', border: '1px solid #ff9800', borderRadius: '6px', fontSize: '13px', textAlign: 'center' }}>UI 컴포넌트</div>
    </div>
    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '6px' }}>
      <div style={{ padding: '12px 20px', background: '#f3e5f5', border: '2px solid #7b1fa2', borderRadius: '8px', textAlign: 'center', minWidth: '120px' }}>
        <div style={{ fontWeight: 'bold', color: '#7b1fa2' }}>Sub-Agent #3</div>
        <div style={{ fontSize: '13px', color: '#555' }}>(테스트)</div>
      </div>
      <div style={{ fontSize: '18px', color: '#666' }}>↓</div>
      <div style={{ padding: '8px 16px', background: '#fff3e0', border: '1px solid #ff9800', borderRadius: '6px', fontSize: '13px', textAlign: 'center' }}>테스트 코드</div>
    </div>
  </div>
</div>

### Agent Team의 구성 요소

**Team Lead (팀 리드)**
- 사용자의 요청을 분석하고 작업을 분해
- Sub-agent를 생성하고 각각에게 역할과 작업을 할당
- 작업 진행 상황을 모니터링하고 결과를 통합
- Task 시스템을 통해 작업 의존성과 우선순위를 관리

**Sub-agents (서브 에이전트)**
- Team Lead로부터 할당받은 구체적인 작업을 수행
- 각 에이전트는 독립적인 프로세스로 실행
- 파일 수정, 테스트 실행 등 실제 작업을 담당
- 작업 완료 시 Team Lead에게 결과를 보고

**Task 시스템**
- 작업(Task)의 생성, 할당, 완료를 추적
- 에이전트 간 작업 의존성 관리
- 진행 상황을 구조화하여 표시

### 단일 에이전트 vs Agent Team 비교

| 구분 | 단일 에이전트 | Agent Team |
|------|------------|------------|
| **처리 방식** | 순차적 (하나씩) | 병렬 (동시 처리) |
| **적합한 작업** | 단순하고 집중된 작업 | 복잡하고 다면적인 작업 |
| **작업 속도** | 기본 속도 | 병렬 처리로 빠름 |
| **리소스 사용** | 낮음 | 높음 (API 호출 증가) |
| **작업 예시** | 함수 하나 수정 | 풀스택 기능 구현 |
| **모니터링** | 단일 터미널 | tmux 멀티 pane 필요 |

### 언제 Agent Team을 사용할까?

Agent Team은 다음과 같은 상황에서 효과적입니다:

- **서로 독립적인 작업이 여러 개 있을 때** -- 프론트엔드와 백엔드 동시 개발
- **코드 작성과 테스트를 병렬로 진행할 때** -- 기능 구현과 테스트 작성 동시 수행
- **대규모 코드베이스에서 여러 파일을 수정할 때** -- TypeScript 마이그레이션 등
- **분석, 구현, 검증을 동시에 진행할 때** -- 리서치, 코딩, 코드 리뷰 병렬화

> **Tip: Agent Team은 언제 사용하면 좋을까?**
> 단순한 작업(함수 하나 수정, 버그 하나 fix)에는 단일 에이전트가 더 효율적입니다.
> Agent Team은 "여러 사람이 동시에 작업하면 빨라질" 규모의 작업에 적합합니다.
> 프로젝트에서 서로 독립적인 파트를 나눌 수 있는지를 기준으로 판단하세요.

---

## 1.3 tmux가 Agent Team에 필수적인 이유

Agent Team을 실행하면 여러 에이전트가 동시에 작동합니다.
이를 효과적으로 관리하려면 tmux의 기능이 필수적입니다.

### 이유 1: 여러 에이전트를 동시에 모니터링

tmux의 pane 분할 기능으로 여러 에이전트의 작업 상황을 한 화면에서 확인할 수 있습니다.

<div style={{ border: '2px solid #4a9eff', borderRadius: '8px', overflow: 'hidden', margin: '20px 0', fontFamily: 'monospace', fontSize: '14px', maxWidth: '700px' }}>
  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gridTemplateRows: '1fr 1fr' }}>
    <div style={{ padding: '16px', background: '#1a1a2e', color: '#e0e0e0', borderRight: '2px solid #4a9eff', borderBottom: '2px solid #4a9eff' }}>
      <div style={{ color: '#7b1fa2', fontWeight: 'bold', marginBottom: '8px' }}>Pane 0 - Team Lead</div>
      <div style={{ color: '#aaa' }}>&gt; Task #1 생성 중...</div>
      <div style={{ color: '#aaa' }}>&gt; Agent 1에 할당</div>
      <div style={{ color: '#aaa' }}>&gt; Agent 2에 할당</div>
    </div>
    <div style={{ padding: '16px', background: '#1a1a2e', color: '#e0e0e0', borderBottom: '2px solid #4a9eff' }}>
      <div style={{ color: '#7b1fa2', fontWeight: 'bold', marginBottom: '8px' }}>Pane 1 - Agent 1 (코더)</div>
      <div style={{ color: '#aaa' }}>&gt; src/api.ts 수정 중</div>
      <div style={{ color: '#00e676' }}>&gt; 함수 작성 완료</div>
    </div>
    <div style={{ padding: '16px', background: '#1a1a2e', color: '#e0e0e0', borderRight: '2px solid #4a9eff' }}>
      <div style={{ color: '#7b1fa2', fontWeight: 'bold', marginBottom: '8px' }}>Pane 2 - Agent 2 (테스터)</div>
      <div style={{ color: '#aaa' }}>&gt; 테스트 파일 생성 중</div>
      <div style={{ color: '#aaa' }}>&gt; api.test.ts 작성</div>
    </div>
    <div style={{ padding: '16px', background: '#1a1a2e', color: '#e0e0e0' }}>
      <div style={{ color: '#4a9eff', fontWeight: 'bold', marginBottom: '8px' }}>Pane 3 - Terminal</div>
      <div style={{ color: '#00e676' }}>$ git status</div>
      <div style={{ color: '#00e676' }}>$ npm test</div>
    </div>
  </div>
</div>

### 이유 2: SSH 연결이 끊어져도 에이전트가 계속 실행

원격 서버에서 작업할 때, tmux 없이는 SSH 연결이 끊기면 모든 에이전트가 즉시 종료됩니다.
tmux 세션 안에서 실행하면 연결이 끊어져도 에이전트들이 계속 작업을 수행합니다.

```bash
# 원격 서버에서 Agent Team 실행
ssh dev-server
tmux new-session -s agent-team
claude "풀스택 기능 구현해줘"  # Agent Team 시작

# SSH 연결이 끊어져도 에이전트는 계속 작업 중

# 나중에 재접속
ssh dev-server
tmux attach -t agent-team  # 에이전트 진행 상황 확인
```

### 이유 3: 세션 단위로 프로젝트별 환경 관리

여러 프로젝트를 동시에 진행할 때, tmux 세션으로 프로젝트별 에이전트 환경을 분리할 수 있습니다.

```bash
# 프로젝트별 세션 관리
tmux new-session -s project-a    # 프로젝트 A의 Agent Team
tmux new-session -s project-b    # 프로젝트 B의 Agent Team

# 세션 목록 확인
tmux ls
# project-a: 5 windows (attached)
# project-b: 3 windows

# 세션 간 전환
tmux switch-client -t project-b
```

### 이유 4: 스크롤백 버퍼로 에이전트 히스토리 확인

에이전트의 출력이 화면을 넘어갈 때, tmux의 스크롤백 기능으로 이전 출력을 확인할 수 있습니다.

```bash
# 스크롤 모드 진입: Ctrl-b [
# 위/아래 화살표 또는 Page Up/Down으로 스크롤
# q로 스크롤 모드 종료

# 스크롤백 버퍼 크기 늘리기 (~/.tmux.conf)
set-option -g history-limit 10000
```

> **Tip: 왜 tmux인가?**
> 원격 서버에서 Claude Code Agent Team을 실행할 때, tmux 없이는 SSH 연결이 끊기면
> 모든 에이전트가 종료됩니다. tmux 세션 안에서 실행하면 연결이 끊어져도
> 에이전트들이 계속 작업을 수행합니다. 장시간 실행되는 Agent Team 작업에는
> tmux가 사실상 필수입니다.

---

## 요약

이 장에서 배운 내용을 정리합니다:

| 핵심 개념 | 설명 |
|-----------|------|
| **Claude Code** | Anthropic의 CLI 기반 AI 코딩 에이전트 |
| **Agent Team** | 여러 에이전트가 작업을 분담하여 병렬 처리하는 기능 |
| **Team Lead** | 작업을 분배하고 조율하는 에이전트 |
| **Sub-agent** | 실제 작업을 수행하는 하위 에이전트 |
| **tmux 필요성** | 멀티 에이전트 모니터링, 세션 유지, 환경 관리에 필수 |

다음 장에서는 Claude Code를 설치하고 tmux와 함께 사용하는 기본 환경을 설정합니다.
