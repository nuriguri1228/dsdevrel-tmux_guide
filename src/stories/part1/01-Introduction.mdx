import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="1부: Linux tmux 가이드/01. tmux 시작하기" />

# tmux 시작하기

터미널 하나로 여러 작업을 동시에, 그리고 안전하게 관리하는 방법을 알아봅니다.

---

## 1.1 tmux란 무엇인가?

**tmux**는 **Terminal Multiplexer**의 약자입니다. 하나의 터미널 화면 안에서 여러 개의 터미널 세션을 생성하고, 전환하고, 분할하여 동시에 관리할 수 있게 해주는 도구입니다.

### 핵심 개념

tmux의 가장 중요한 특징은 **서버-클라이언트 아키텍처**입니다.

- **tmux 서버**: 백그라운드에서 실행되며, 모든 세션과 그 안의 프로세스를 관리합니다. 터미널을 닫아도 서버는 계속 실행됩니다.
- **tmux 클라이언트**: 터미널에서 tmux 서버에 접속하는 프로그램입니다. 클라이언트가 종료되어도 서버의 세션은 유지됩니다.

이 구조 덕분에 SSH 연결이 끊겨도, 터미널을 실수로 닫아도, 실행 중인 작업은 안전하게 유지됩니다.

<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '12px', margin: '20px 0', fontFamily: 'monospace', fontSize: '14px', maxWidth: '700px' }}>
  <div style={{ width: '100%', border: '2px solid #4a9eff', borderRadius: '8px', padding: '16px', background: '#1a1a2e' }}>
    <div style={{ color: '#4a9eff', fontWeight: 'bold', textAlign: 'center', marginBottom: '16px', fontSize: '16px' }}>tmux Server</div>
    <div style={{ display: 'flex', gap: '16px', justifyContent: 'center' }}>
      <div style={{ border: '1px solid #4a9eff', borderRadius: '6px', padding: '12px', background: '#0d1117', minWidth: '180px' }}>
        <div style={{ color: '#00e676', fontWeight: 'bold', marginBottom: '8px' }}>Session: dev</div>
        <div style={{ display: 'flex', gap: '4px' }}>
          <div style={{ padding: '6px 12px', background: '#2d5016', color: '#e0e0e0', borderRadius: '4px', fontSize: '12px' }}>Win1</div>
          <div style={{ padding: '6px 12px', background: '#2d5016', color: '#e0e0e0', borderRadius: '4px', fontSize: '12px' }}>Win2</div>
        </div>
      </div>
      <div style={{ border: '1px solid #4a9eff', borderRadius: '6px', padding: '12px', background: '#0d1117', minWidth: '180px' }}>
        <div style={{ color: '#00e676', fontWeight: 'bold', marginBottom: '8px' }}>Session: ops</div>
        <div style={{ display: 'flex', gap: '4px' }}>
          <div style={{ padding: '6px 12px', background: '#2d5016', color: '#e0e0e0', borderRadius: '4px', fontSize: '12px' }}>Win1</div>
          <div style={{ padding: '6px 12px', background: '#2d5016', color: '#e0e0e0', borderRadius: '4px', fontSize: '12px' }}>Win2</div>
        </div>
      </div>
    </div>
  </div>
  <div style={{ display: 'flex', gap: '80px', color: '#666', fontSize: '24px' }}>
    <span>↓</span>
    <span>↓</span>
  </div>
  <div style={{ display: 'flex', gap: '24px' }}>
    <div style={{ padding: '12px 24px', background: '#e3f2fd', border: '2px solid #1976d2', borderRadius: '8px', fontWeight: 'bold', textAlign: 'center' }}>
      <div>Client A</div>
      <div style={{ fontSize: '12px', color: '#666', fontWeight: 'normal' }}>(Terminal)</div>
    </div>
    <div style={{ padding: '12px 24px', background: '#e3f2fd', border: '2px solid #1976d2', borderRadius: '8px', fontWeight: 'bold', textAlign: 'center' }}>
      <div>Client B</div>
      <div style={{ fontSize: '12px', color: '#666', fontWeight: 'normal' }}>(Terminal)</div>
    </div>
  </div>
</div>

### GNU Screen과의 비교

tmux가 등장하기 전에는 **GNU Screen**이 터미널 멀티플렉서의 대표 도구였습니다. tmux는 2007년에 처음 공개되었으며, Screen에 비해 다음과 같은 장점을 갖고 있습니다.

| 항목 | GNU Screen | tmux |
|------|-----------|------|
| 수직 분할 | 패치 필요 (기본 미지원) | 기본 지원 |
| 스크립팅 | 제한적 | 강력한 명령어 체계 |
| 상태바 커스터마이징 | 기본적 | 매우 유연 |
| 개발 활동 | 느림 | 활발 |
| 라이선스 | GPL | ISC (BSD 계열) |

현재 대부분의 Linux 배포판에서 tmux를 기본으로 제공하며, 커뮤니티와 플러그인 생태계도 훨씬 활발합니다.

---

## 1.2 왜 tmux를 사용해야 하는가?

### SSH 연결 끊김 방지

원격 서버에서 장시간 실행되는 작업(빌드, 배포, 데이터 처리 등)을 수행할 때, SSH 연결이 끊기면 실행 중인 프로세스도 함께 종료됩니다. tmux를 사용하면 세션이 서버에서 독립적으로 유지되므로, 연결이 끊겨도 작업이 계속 진행됩니다. 나중에 다시 접속하여 세션에 재연결(attach)하면 됩니다.

### 멀티태스킹

하나의 터미널 화면을 여러 영역으로 분할하여 동시에 여러 작업을 볼 수 있습니다. 코드 편집, 서버 로그 확인, 테스트 실행을 한 화면에서 동시에 수행할 수 있습니다.

### 작업 컨텍스트 보존

프로젝트별로 세션을 만들어 두면, 각 프로젝트의 작업 환경(열려 있는 파일, 실행 중인 서버, 디렉터리 위치 등)을 그대로 유지할 수 있습니다. 프로젝트 간 전환이 순식간에 이루어집니다.

### 협업

같은 tmux 세션에 여러 사용자가 동시에 접속할 수 있어, 페어 프로그래밍이나 원격 교육에 활용할 수 있습니다.

### 자동화

tmux 명령어를 셸 스크립트로 작성하면, 프로젝트별 개발 환경을 한 번의 명령으로 자동 구성할 수 있습니다.

### 실제 활용 시나리오

> **서버 관리자**: 여러 서버의 로그를 각각의 페인에 띄워 놓고 동시에 모니터링합니다. 문제가 발생하면 해당 페인에서 바로 대응할 수 있습니다.

> **개발자**: 좌측에 에디터(vim/neovim), 우측 상단에 git 상태, 우측 하단에 개발 서버를 배치합니다. IDE 없이도 효율적인 개발 환경을 구성합니다.

> **데이터 엔지니어**: 수 시간이 걸리는 데이터 파이프라인을 tmux 세션에서 실행하고, SSH 연결을 끊은 뒤 퇴근합니다. 다음 날 다시 접속하여 결과를 확인합니다.

---

## 1.3 설치 방법

### Ubuntu / Debian

```bash
sudo apt update
sudo apt install tmux
```

### CentOS / RHEL / Fedora

```bash
# CentOS / RHEL 7
sudo yum install tmux

# CentOS / RHEL 8+ / Fedora
sudo dnf install tmux
```

### macOS (참고)

```bash
# Homebrew 사용
brew install tmux
```

### 소스에서 빌드 (최신 버전이 필요한 경우)

배포판의 패키지 매니저가 제공하는 버전이 오래된 경우, 소스에서 직접 빌드할 수 있습니다.

```bash
# 빌드 의존성 설치 (Ubuntu/Debian)
sudo apt install libevent-dev ncurses-dev build-essential bison pkg-config

# 소스 다운로드 및 빌드
git clone https://github.com/tmux/tmux.git
cd tmux
sh autogen.sh
./configure
make && sudo make install
```

### 버전 확인

```bash
tmux -V
```

출력 예시:

```text
tmux 3.4
```

> **참고:** 이 가이드는 tmux 3.x 기준으로 작성되었습니다. 2.x 버전에서는 일부 옵션이나 동작이 다를 수 있습니다.

---

## 1.4 기본 용어

tmux는 **세션(Session)**, **윈도우(Window)**, **페인(Pane)**의 3단계 계층 구조로 이루어져 있습니다. 이 구조를 이해하는 것이 tmux 사용의 첫걸음입니다.

### 세션 (Session)

tmux의 **최상위 단위**입니다. 하나의 세션은 독립적인 작업 공간을 의미합니다. 프로젝트별로 세션을 만들어 관리하는 것이 일반적입니다.

### 윈도우 (Window)

세션 안에 있는 **탭**과 같은 개념입니다. 각 윈도우는 독립적인 터미널을 제공하며, 하단 상태바에 윈도우 목록이 표시됩니다.

### 페인 (Pane)

하나의 윈도우를 **분할한 영역**입니다. 수평 또는 수직으로 분할하여 한 화면에 여러 터미널을 배치할 수 있습니다.

### 계층 구조

<div style={{ margin: '20px 0', fontFamily: 'monospace', fontSize: '14px', maxWidth: '500px' }}>
  <div style={{ padding: '10px 16px', background: '#1976d2', color: '#fff', fontWeight: 'bold', borderRadius: '8px 8px 0 0' }}>Session "development"</div>
  <div style={{ borderLeft: '3px solid #1976d2', marginLeft: '16px' }}>
    <div style={{ padding: '8px 16px', borderBottom: '1px solid #e0e0e0', background: '#e3f2fd' }}>
      <div style={{ fontWeight: 'bold', color: '#1976d2' }}>Window 0: "editor"</div>
      <div style={{ marginLeft: '16px', borderLeft: '2px solid #4a9eff', paddingLeft: '12px', marginTop: '4px' }}>
        <div style={{ color: '#333', padding: '2px 0' }}>Pane 0 (vim)</div>
        <div style={{ color: '#333', padding: '2px 0' }}>Pane 1 (terminal)</div>
      </div>
    </div>
    <div style={{ padding: '8px 16px', borderBottom: '1px solid #e0e0e0', background: '#e3f2fd' }}>
      <div style={{ fontWeight: 'bold', color: '#1976d2' }}>Window 1: "server"</div>
      <div style={{ marginLeft: '16px', borderLeft: '2px solid #4a9eff', paddingLeft: '12px', marginTop: '4px' }}>
        <div style={{ color: '#333', padding: '2px 0' }}>Pane 0 (npm start)</div>
      </div>
    </div>
    <div style={{ padding: '8px 16px', background: '#e3f2fd', borderRadius: '0 0 0 8px' }}>
      <div style={{ fontWeight: 'bold', color: '#1976d2' }}>Window 2: "logs"</div>
      <div style={{ marginLeft: '16px', borderLeft: '2px solid #4a9eff', paddingLeft: '12px', marginTop: '4px' }}>
        <div style={{ color: '#333', padding: '2px 0' }}>Pane 0 (app logs)</div>
        <div style={{ color: '#333', padding: '2px 0' }}>Pane 1 (system logs)</div>
      </div>
    </div>
  </div>
</div>

이 구조를 실생활에 비유하면 다음과 같습니다.

| tmux 개념 | 비유 |
|-----------|------|
| 세션 (Session) | 책상 (각 프로젝트별 책상) |
| 윈도우 (Window) | 책상 위의 모니터 (탭 전환) |
| 페인 (Pane) | 모니터 화면 분할 |

---

## 1.5 첫 번째 tmux 세션 시작하기

### 기본 세션 시작

가장 간단한 방법은 터미널에서 `tmux` 명령을 입력하는 것입니다.

```bash
tmux
```

실행하면 화면이 바뀌면서 **하단에 초록색 상태바**가 나타납니다. 이것이 tmux 세션 안에 들어왔다는 표시입니다.

<div style={{ margin: '20px 0', fontFamily: 'monospace', fontSize: '14px', maxWidth: '700px', border: '2px solid #4a9eff', borderRadius: '8px', overflow: 'hidden' }}>
  <div style={{ background: '#1a1a2e', color: '#e0e0e0', padding: '16px 20px', minHeight: '120px' }}>
    <div>user@server:~$</div>
    <div style={{ display: 'inline-block', width: '8px', height: '16px', background: '#e0e0e0', animation: 'blink 1s infinite' }}></div>
  </div>
  <div style={{ background: '#2d5016', color: '#e0e0e0', padding: '6px 12px', display: 'flex', justifyContent: 'space-between', fontSize: '13px' }}>
    <span>[0] 0:bash*</span>
    <span>"server" 14:00</span>
  </div>
</div>
<div style={{ display: 'flex', justifyContent: 'space-between', maxWidth: '700px', fontSize: '12px', color: '#666', fontFamily: 'monospace', padding: '4px 12px' }}>
  <span>↑세션명 &nbsp; ↑윈도우 번호:이름</span>
  <span>↑호스트명 &nbsp; ↑시간</span>
</div>

### 이름을 지정하여 세션 시작

세션에 의미 있는 이름을 붙이면 여러 세션을 관리할 때 편리합니다.

```bash
tmux new-session -s my-project
```

줄여서 다음과 같이 쓸 수도 있습니다.

```bash
tmux new -s my-project
```

### 세션 목록 확인

현재 실행 중인 모든 tmux 세션을 확인하려면 다음 명령을 사용합니다.

```bash
tmux list-sessions
```

줄여서:

```bash
tmux ls
```

출력 예시:

```text
my-project: 1 windows (created Thu Jan  1 10:00:00 2026) (attached)
```

`(attached)` 표시는 현재 해당 세션에 접속 중임을 의미합니다.

### 세션 종료

tmux 세션 안에서 `exit`을 입력하거나 `Ctrl+d`를 누르면 세션이 종료됩니다.

```bash
exit
```

세션 안의 모든 윈도우와 페인이 닫히면 세션이 자동으로 종료됩니다.

> **주의:** `exit`은 세션을 완전히 종료합니다. 세션을 유지하면서 빠져나오려면 **분리(Detach)** 기능을 사용해야 합니다. 이 내용은 다음 챕터에서 다룹니다.

---

## 기본 명령어 요약

| 명령어 | 설명 |
|--------|------|
| `tmux` | 새 세션 시작 (자동 이름 부여) |
| `tmux new -s <name>` | 이름을 지정하여 새 세션 시작 |
| `tmux ls` | 현재 실행 중인 세션 목록 확인 |
| `tmux -V` | tmux 버전 확인 |
| `exit` | 현재 세션/페인 종료 |

---

## 다음 단계

다음 챕터에서는 tmux의 핵심인 **Prefix 키 시스템**과 세션 분리/재접속, 윈도우 관리, 페인 분할 등 **기본 조작법**을 배웁니다. tmux를 본격적으로 활용하기 위한 필수 지식입니다.
