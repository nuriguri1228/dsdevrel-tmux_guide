import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="1부: Linux tmux 가이드/02. 기본 사용법" />

# 기본 사용법

tmux의 핵심 조작법을 익혀 봅니다. Prefix 키 시스템, 세션 관리, 윈도우와 페인 조작까지 다룹니다.

---

## 2.1 Prefix 키 이해하기

tmux의 모든 단축키는 **Prefix 키**를 먼저 누른 뒤, 명령 키를 누르는 2단계 방식으로 작동합니다.

### 기본 Prefix: `Ctrl+b`

tmux의 기본 Prefix 키는 `Ctrl+b`입니다.

**작동 방식:**

1. `Ctrl+b`를 누릅니다 (동시에 누릅니다).
2. 손을 뗍니다.
3. 명령 키를 누릅니다 (예: `d`를 눌러 세션에서 분리).

```text
┌──────────────────────────────────────────┐
│  Prefix 키 동작 흐름                       │
│                                          │
│  Step 1       Step 2       Step 3        │
│  Ctrl+b  →  손을 뗌  →  명령키 (d, c 등) │
│  (동시누름)              (단독으로 누름)    │
└──────────────────────────────────────────┘
```

> **주의:** `Ctrl+b+d`처럼 세 키를 동시에 누르는 것이 아닙니다. `Ctrl+b`를 누르고 손을 뗀 뒤, `d`를 따로 누릅니다.

이 문서에서는 Prefix 키를 `Prefix`로 표기합니다. 예를 들어 "세션 분리: `Prefix + d`"는 `Ctrl+b`를 누르고 뗀 뒤 `d`를 누르는 것을 의미합니다.

> **팁:** 기본 Prefix인 `Ctrl+b`가 불편하다면 `Ctrl+a`로 변경하는 것이 일반적입니다. 이 내용은 4장 설정 챕터에서 다룹니다.

---

## 2.2 세션 관리: 생성, 분리, 재접속

세션의 생성과 분리/재접속은 tmux의 가장 기본적이고 중요한 기능입니다.

### 세션 생성

```bash
# 이름을 지정하여 세션 생성
tmux new -s project-a

# 이름 없이 세션 생성 (자동으로 0, 1, 2... 번호 부여)
tmux
```

### 세션에서 분리 (Detach)

세션을 종료하지 않고 빠져나옵니다. 세션 내의 모든 프로세스는 계속 실행됩니다.

```text
Prefix + d
```

분리되면 다음과 같은 메시지가 터미널에 표시됩니다:

```text
[detached (from session project-a)]
```

### 세션 목록 확인

```bash
tmux ls
```

출력 예시:

```text
project-a: 1 windows (created Thu Jan  1 10:00:00 2026)
project-b: 2 windows (created Thu Jan  1 10:05:00 2026)
```

### 세션 재접속 (Attach)

```bash
# 특정 세션에 재접속
tmux attach -t project-a

# 줄여서
tmux a -t project-a

# 마지막으로 사용한 세션에 재접속
tmux attach
```

### 세션 종료

```bash
# 특정 세션 종료 (외부에서)
tmux kill-session -t project-b

# 현재 세션 안에서 종료
exit
```

### 세션 전환

세션 안에서 다른 세션으로 전환할 수 있습니다.

```text
Prefix + s    세션 목록을 트리 뷰로 표시하고 선택하여 전환
Prefix + (    이전 세션으로 전환
Prefix + )    다음 세션으로 전환
```

### 실습: 세션 워크플로우

다음 순서를 직접 따라 해보세요.

```bash
# 1. 첫 번째 세션 생성
tmux new -s work

# 2. 세션 안에서 간단한 작업 수행
echo "작업 중..."

# 3. 세션에서 분리 (Prefix + d)

# 4. 두 번째 세션 생성
tmux new -s monitoring

# 5. 세션에서 분리 (Prefix + d)

# 6. 세션 목록 확인
tmux ls
# 출력:
# monitoring: 1 windows (created ...)
# work: 1 windows (created ...)

# 7. work 세션에 재접속
tmux attach -t work
```

---

## 2.3 윈도우 관리

윈도우는 세션 안의 **탭** 개념입니다. 하단 상태바에 윈도우 목록이 표시되며, 현재 윈도우에는 `*` 표시가 붙습니다.

### 윈도우 생성

```text
Prefix + c    새 윈도우 생성
```

### 윈도우 간 전환

```text
Prefix + n        다음 윈도우로 이동
Prefix + p        이전 윈도우로 이동
Prefix + 0~9      해당 번호의 윈도우로 직접 이동
Prefix + w        윈도우 목록을 트리 뷰로 표시하고 선택
Prefix + l        마지막으로 활성화된 윈도우로 전환
```

상태바에서 윈도우 전환을 시각적으로 이해할 수 있습니다:

```text
상태바:  [0:bash  1:vim*  2:logs]
                    ↑
               현재 윈도우

Prefix + n  →  [0:bash  1:vim  2:logs*]    다음 윈도우로 이동
Prefix + p  →  [0:bash*  1:vim  2:logs]    이전 윈도우로 이동
Prefix + 2  →  [0:bash  1:vim  2:logs*]    윈도우 2로 직접 이동
```

### 윈도우 이름 변경

```text
Prefix + ,    현재 윈도우의 이름을 변경 (하단에 입력 프롬프트 표시)
```

의미 있는 이름을 붙이면 여러 윈도우를 관리하기 쉬워집니다. 예: `editor`, `server`, `logs`

### 윈도우 닫기

```text
Prefix + &    현재 윈도우 닫기 (확인 프롬프트 표시: y/n)
```

또는 윈도우 안의 모든 페인에서 `exit`을 실행하면 윈도우가 자동으로 닫힙니다.

---

## 2.4 페인 분할

페인은 하나의 윈도우를 여러 영역으로 분할하여 동시에 여러 터미널을 표시하는 기능입니다.

### 수평 분할 (위/아래)

```text
Prefix + "    현재 페인을 수평으로 분할 (위/아래로 나뉨)
```

### 수직 분할 (좌/우)

```text
Prefix + %    현재 페인을 수직으로 분할 (좌/우로 나뉨)
```

### 분할 과정 시각화

```text
[초기 상태]              [수평 분할: Prefix + "]    [수직 분할: Prefix + %]
┌──────────────┐        ┌──────────────┐           ┌──────┬───────┐
│              │        │    Pane 0    │           │      │       │
│   Pane 0     │   →    ├──────────────┤           │Pane 0│Pane 1 │
│              │        │    Pane 1    │           │      │       │
└──────────────┘        └──────────────┘           └──────┴───────┘
```

### 복합 분할 예시

여러 번 분할하여 복잡한 레이아웃을 만들 수 있습니다.

```text
[Step 1: 수직 분할]     [Step 2: 우측을 수평 분할]
┌──────┬───────┐        ┌──────┬───────┐
│      │       │        │      │Pane 1 │
│Pane 0│Pane 1 │   →    │Pane 0├───────┤
│      │       │        │      │Pane 2 │
└──────┴───────┘        └──────┴───────┘
```

> **팁:** 기본 단축키 `"` (수평)과 `%` (수직)가 직관적이지 않다면, 설정에서 `|` (수직)과 `-` (수평)로 변경할 수 있습니다. 4장에서 자세히 다룹니다.

---

## 2.5 페인 간 이동

여러 페인으로 분할한 뒤, 페인 사이를 오갈 수 있어야 합니다.

### 방향키로 이동

```text
Prefix + 화살표(↑↓←→)    해당 방향의 페인으로 이동
```

### 순서대로 이동

```text
Prefix + o    다음 페인으로 이동 (번호 순서)
```

### 마지막 활성 페인으로 이동

```text
Prefix + ;    직전에 활성화되었던 페인으로 전환
```

### 페인 번호 표시 후 이동

```text
Prefix + q    각 페인에 번호를 표시 (번호가 표시되는 동안 해당 번호를 누르면 이동)
```

```text
┌──────┬───────┐
│      │       │
│  0   │   1   │     ← Prefix + q 를 누르면 각 페인에
│      │       │       번호가 크게 표시됩니다.
│      ├───────┤       이때 1을 누르면 Pane 1로 이동합니다.
│      │       │
│      │   2   │
│      │       │
└──────┴───────┘
```

---

## 2.6 페인 조작

### 페인 닫기

```text
Prefix + x    현재 페인을 닫기 (확인 프롬프트: y/n)
```

페인 안에서 `exit` 또는 `Ctrl+d`를 입력해도 페인이 닫힙니다.

### 페인 확대/축소 (Zoom)

```text
Prefix + z    현재 페인을 전체 화면으로 확대 (다시 누르면 원래 크기로 복귀)
```

특정 페인에서 작업에 집중하고 싶을 때 유용합니다. 확대 상태에서는 상태바의 윈도우 이름 옆에 `Z` 표시가 나타납니다.

```text
[일반 상태]                          [Zoom 상태: Prefix + z]
┌──────┬───────┐                    ┌──────────────────────┐
│      │       │                    │                      │
│Pane 0│Pane 1 │         →          │       Pane 1         │
│      │       │                    │    (전체 화면)        │
└──────┴───────┘                    │                      │
                                    └──────────────────────┘
상태바: [0:bash*]                   상태바: [0:bashZ*]
                                                 ↑ Zoom 표시
```

### 페인 위치 변경

```text
Prefix + {    현재 페인을 이전 위치로 이동 (앞으로)
Prefix + }    현재 페인을 다음 위치로 이동 (뒤로)
```

### 페인 레이아웃 순환

```text
Prefix + Space    미리 정의된 레이아웃을 순서대로 순환 변경
```

---

## 2.7 기본 단축키 총정리

### 세션 관련 단축키

| 단축키 | 설명 |
|--------|------|
| `Prefix + d` | 세션에서 분리 (Detach) |
| `Prefix + s` | 세션 목록 보기 및 전환 |
| `Prefix + $` | 현재 세션 이름 변경 |
| `Prefix + (` | 이전 세션으로 전환 |
| `Prefix + )` | 다음 세션으로 전환 |

### 윈도우 관련 단축키

| 단축키 | 설명 |
|--------|------|
| `Prefix + c` | 새 윈도우 생성 |
| `Prefix + n` | 다음 윈도우로 이동 |
| `Prefix + p` | 이전 윈도우로 이동 |
| `Prefix + 0-9` | 해당 번호 윈도우로 이동 |
| `Prefix + w` | 윈도우 목록 트리 뷰 |
| `Prefix + ,` | 현재 윈도우 이름 변경 |
| `Prefix + &` | 현재 윈도우 닫기 |
| `Prefix + l` | 마지막 윈도우로 전환 |

### 페인 관련 단축키

| 단축키 | 설명 |
|--------|------|
| `Prefix + "` | 수평 분할 (위/아래) |
| `Prefix + %` | 수직 분할 (좌/우) |
| `Prefix + 화살표` | 해당 방향 페인으로 이동 |
| `Prefix + o` | 다음 페인으로 이동 |
| `Prefix + ;` | 마지막 활성 페인으로 이동 |
| `Prefix + q` | 페인 번호 표시 |
| `Prefix + x` | 현재 페인 닫기 |
| `Prefix + z` | 페인 확대/축소 (Zoom) |
| `Prefix + {` | 페인을 앞으로 이동 |
| `Prefix + }` | 페인을 뒤로 이동 |
| `Prefix + Space` | 페인 레이아웃 순환 변경 |

### 기타

| 단축키 | 설명 |
|--------|------|
| `Prefix + :` | tmux 명령 모드 진입 |
| `Prefix + t` | 시계 표시 |
| `Prefix + ?` | 모든 키 바인딩 목록 표시 |

---

## 실습 과제: 기본 조작 연습

다음 시나리오를 직접 수행해 보세요.

```bash
# 1. "practice" 이름으로 세션 생성
tmux new -s practice

# 2. 윈도우 이름을 "main"으로 변경
#    Prefix + , → "main" 입력 → Enter

# 3. 수직 분할
#    Prefix + %

# 4. 우측 페인에서 수평 분할
#    Prefix + "

# 5. 결과 확인: 3개의 페인이 만들어진 레이아웃
#    ┌───────┬───────┐
#    │       │ Pane1 │
#    │ Pane0 ├───────┤
#    │       │ Pane2 │
#    └───────┴───────┘

# 6. 각 페인을 이동하며 확인
#    Prefix + 화살표로 이동

# 7. Pane1을 Zoom으로 확대
#    Prefix + z  (다시 누르면 복귀)

# 8. 새 윈도우 생성
#    Prefix + c

# 9. 윈도우 목록 확인
#    Prefix + w

# 10. 세션에서 분리
#     Prefix + d

# 11. 세션 목록 확인
tmux ls

# 12. 세션에 재접속
tmux attach -t practice
```

---

## 다음 단계

기본 조작법을 익혔다면, 다음 챕터에서 **세션과 윈도우를 효율적으로 관리하는 방법**, **페인 레이아웃**, **복사 모드** 등 한 단계 더 깊은 내용을 배웁니다.
